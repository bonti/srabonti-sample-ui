{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\PIONEER\\\\Documents\\\\projects\\\\srabonti-sample-react-java\\\\srabonti-sample-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\nimport _classCallCheck from \"C:\\\\Users\\\\PIONEER\\\\Documents\\\\projects\\\\srabonti-sample-react-java\\\\srabonti-sample-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\PIONEER\\\\Documents\\\\projects\\\\srabonti-sample-react-java\\\\srabonti-sample-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\PIONEER\\\\Documents\\\\projects\\\\srabonti-sample-react-java\\\\srabonti-sample-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\PIONEER\\\\Documents\\\\projects\\\\srabonti-sample-react-java\\\\srabonti-sample-ui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\PIONEER\\\\Documents\\\\projects\\\\srabonti-sample-react-java\\\\srabonti-sample-ui\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport MusicManager from './components/public/MusicManager';\nimport AuthenticatedRoute from './components/AuthenticatedRoute';\nimport queryString from 'query-string';\nimport { connectAdvanced } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { IntlProvider } from \"react-intl\"; //potential for ue for internationalization\n\nimport messages_en from './locales/en/common.json';\nimport flatten from 'flat';\nimport { withCookies } from 'react-cookie';\nimport * as PortalConstants from './utility/constants';\nimport TagManager from 'react-gtm-module';\nimport _ from 'lodash';\nimport CCBLayout from './components/common/CCBLayout';\nimport P2CLayout from './components/common/P2CLayout';\nimport { LoadingOutlined } from '@ant-design/icons';\n\n//TO Show extensible support of internationalization\n//support for older browsers e.g IE11, Edge & Safari 13\nif (!Intl.RelativeTimeFormat) {\n  require('@formatjs/intl-relativetimeformat/polyfill');\n\n  require('@formatjs/intl-relativetimeformat/dist/locale-data/en');\n}\n\nvar spinIcon = /*#__PURE__*/React.createElement(LoadingOutlined, {\n  style: {\n    fontSize: 24\n  },\n  spin: true,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 18\n  }\n});\nvar i18nConfig = {\n  locale: 'en',\n  messages: messages_en\n};\n\nfunction getAuthToken(props) {\n  if (props.userInfo === undefined) {\n    return props.cookies.get(PortalConstants.AUTH_TOKEN);\n  }\n\n  if (props.userInfo.token !== undefined && props.userInfo.token.accessToken.length > 1) return props.userInfo.token.accessToken;\n  return props.cookies.get(PortalConstants.AUTH_TOKEN);\n}\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App() {\n    _classCallCheck(this, App);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(App, [{\n    key: \"onChangeLanguage\",\n    value: function onChangeLanguage(lang) {\n      switch (lang) {\n        case 'en':\n          i18nConfig.messages = flatten(messages_en);\n          break;\n\n        default:\n          i18nConfig.messages = flatten(messages_en);\n          break;\n      }\n\n      this.setState({\n        locale: lang\n      });\n      i18nConfig.locale = lang;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      _Spin.setDefaultIndicator(spinIcon);\n\n      var authToken = this.props.cookies.get(PortalConstants.AUTH_TOKEN);\n\n      if (authToken && authToken.length > 1 && this.props.location.pathname.includes(\"musicmanager/login\")) {\n        this.props.history.push(\"/home\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var portalName = this.props.nextState ? this.props.nextState.clientConfig.clientData.appName : null;\n      return /*#__PURE__*/React.createElement(IntlProvider, {\n        key: i18nConfig.locale,\n        locale: i18nConfig.locale,\n        messages: i18nConfig.messages,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          height: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/musicmanager\",\n        component: MusicManager,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }), portalName && /*#__PURE__*/React.createElement(AuthenticatedRoute, {\n        path: \"/home\",\n        props: {\n          authToken: getAuthToken(this.props)\n        },\n        component: portalName === PortalConstants.CCB_PORTAL ? CCBLayout : P2CLayout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/error\",\n        component: Error,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nfunction selectorFactory(dispatch) {\n  var ownProps = {};\n  var result = {};\n  var actions = bindActionCreators(clientConfigActions, dispatch);\n  ownProps.actions = actions;\n  return function (nextState, nextOwnProps) {\n    var params = queryString.parse(nextOwnProps.location.search);\n    var cookies = nextOwnProps.cookies;\n    var shouldLoadClient = clientInfoHelpers.shouldLoadClient(params, nextOwnProps.location, nextState, cookies);\n\n    if (shouldLoadClient !== true) {\n      var cachedResult = _objectSpread(_objectSpread({}, nextOwnProps), {}, {\n        nextState: nextState,\n        loadConfig: shouldLoadClient.loadConfig\n      });\n\n      return cachedResult;\n    }\n\n    var config = clientInfoHelpers.createClientConfig(params, cookies);\n    var userInfo = {};\n\n    if (nextState.authentication && nextState.authentication.userInfo) {\n      userInfo = nextState.authentication.userInfo;\n    }\n\n    var nextResult = _objectSpread(_objectSpread({}, nextOwnProps), {}, {\n      config: config,\n      userInfo: userInfo\n    });\n\n    if (!nextOwnProps.actions) {\n      nextResult = _objectSpread(_objectSpread({}, nextResult), {}, {\n        actions: actions\n      });\n    }\n\n    if (result !== nextResult) {\n      result = nextResult;\n    }\n\n    return result;\n  };\n}\n\nexport default withCookies(connectAdvanced(selectorFactory)(App));","map":{"version":3,"sources":["C:/Users/PIONEER/Documents/projects/srabonti-sample-react-java/srabonti-sample-ui/src/App.js"],"names":["React","Component","Switch","Route","MusicManager","AuthenticatedRoute","queryString","connectAdvanced","bindActionCreators","IntlProvider","messages_en","flatten","withCookies","PortalConstants","TagManager","_","CCBLayout","P2CLayout","LoadingOutlined","Intl","RelativeTimeFormat","require","spinIcon","fontSize","i18nConfig","locale","messages","getAuthToken","props","userInfo","undefined","cookies","get","AUTH_TOKEN","token","accessToken","length","App","lang","setState","setDefaultIndicator","authToken","location","pathname","includes","history","push","portalName","nextState","clientConfig","clientData","appName","height","CCB_PORTAL","Error","selectorFactory","dispatch","ownProps","result","actions","clientConfigActions","nextOwnProps","params","parse","search","shouldLoadClient","clientInfoHelpers","cachedResult","loadConfig","config","createClientConfig","authentication","nextResult"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom'\nimport MusicManager from './components/public/MusicManager'\nimport AuthenticatedRoute from './components/AuthenticatedRoute'\nimport queryString from 'query-string'\nimport { connectAdvanced } from 'react-redux';\nimport { bindActionCreators } from 'redux'; \nimport { IntlProvider } from \"react-intl\";//potential for ue for internationalization\nimport messages_en from './locales/en/common.json' \n \nimport flatten from 'flat';\nimport { withCookies } from 'react-cookie';\nimport * as PortalConstants from './utility/constants';\nimport TagManager from 'react-gtm-module';\nimport _ from 'lodash';\nimport CCBLayout from './components/common/CCBLayout';\nimport P2CLayout from './components/common/P2CLayout';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { Spin } from 'antd';\n\n//TO Show extensible support of internationalization\n//support for older browsers e.g IE11, Edge & Safari 13\nif (!Intl.RelativeTimeFormat) {\n  \n  require('@formatjs/intl-relativetimeformat/polyfill');\n  require('@formatjs/intl-relativetimeformat/dist/locale-data/en');\n \n}\n\nconst spinIcon = <LoadingOutlined style={{ fontSize: 24 }} spin />;\n\nlet i18nConfig = {\n  locale: 'en',\n  messages: messages_en\n};\n \n\nfunction getAuthToken(props) {\n  if (props.userInfo === undefined) {\n    return props.cookies.get(PortalConstants.AUTH_TOKEN);\n  }\n\n  if (props.userInfo.token !== undefined && props.userInfo.token.accessToken.length > 1)\n    return props.userInfo.token.accessToken;\n  return props.cookies.get(PortalConstants.AUTH_TOKEN);\n}\n\n\n\nclass App extends Component {\n\n  onChangeLanguage(lang) {\n    switch (lang) { \n      case 'en': i18nConfig.messages = flatten(messages_en); break; \n      default: i18nConfig.messages = flatten(messages_en); break;\n    }\n    this.setState({ locale: lang });\n    i18nConfig.locale = lang;\n  }\n\n  componentDidUpdate() {\n    \n  }\n\n\n\n  componentDidMount() {\n    Spin.setDefaultIndicator(spinIcon);\n    \n    \n    let authToken = this.props.cookies.get(PortalConstants.AUTH_TOKEN);\n    if (authToken && authToken.length > 1 && this.props.location.pathname.includes(\"musicmanager/login\")) {\n      this.props.history.push(\"/home\");\n    } \n \n  }\n\n  \n  render() {\n    const portalName = this.props.nextState ? this.props.nextState.clientConfig.clientData.appName : null;\n    return (\n      <IntlProvider key={i18nConfig.locale} locale={i18nConfig.locale} messages={i18nConfig.messages}>\n        <div style={{ height: \"auto\" }}>\n          <Switch>\n            <Route path=\"/musicmanager\" component={MusicManager} />\n            {portalName &&\n              <AuthenticatedRoute path=\"/home\"\n                props=\n                {{ authToken: getAuthToken(this.props) }} component={portalName === PortalConstants.CCB_PORTAL ? CCBLayout : P2CLayout} />\n            }\n            <Route path=\"/error\" component={Error} />\n          </Switch>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\n\nfunction selectorFactory(dispatch) {\n  let ownProps = {}\n  let result = {}\n\n  const actions = bindActionCreators(clientConfigActions, dispatch)\n  ownProps.actions = actions;\n  return (nextState, nextOwnProps) => {\n    let params = queryString.parse(nextOwnProps.location.search);\n    let cookies = nextOwnProps.cookies;\n\n    var shouldLoadClient = clientInfoHelpers.shouldLoadClient(params, nextOwnProps.location, nextState, cookies);\n    if (shouldLoadClient !== true) {\n      let cachedResult = { ...nextOwnProps, nextState, loadConfig: shouldLoadClient.loadConfig }\n      return cachedResult;\n    }\n\n    let config = clientInfoHelpers.createClientConfig(params, cookies);\n\n    let userInfo = {};\n    if (nextState.authentication && nextState.authentication.userInfo) {\n      userInfo = nextState.authentication.userInfo;\n    }\n    let nextResult = { ...nextOwnProps, config, userInfo }\n    if (!nextOwnProps.actions) {\n      nextResult = { ...nextResult, actions }\n    }\n\n    if (result !== nextResult) {\n      result = nextResult\n    }\n    return result\n  }\n}\nexport default withCookies(connectAdvanced(selectorFactory)(App));\n"]},"metadata":{},"sourceType":"module"}